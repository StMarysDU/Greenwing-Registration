<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Greenwing Youth Event Registration</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f0f8f7;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, p { text-align: center; }
    form { display: flex; flex-direction: column; gap: 1rem; }
    label { font-weight: bold; }
    input, select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .row { display: flex; gap: 1rem; margin-bottom: 1rem; }
    .row .field { flex: 1; display: flex; flex-direction: column; }
    button {
      background-color: #28a745;
      color: white;
      padding: 0.75rem;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background-color: #218838; }
    .section-box {
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 1rem;
      background-color: #f9fdfc;
      margin-bottom: 1rem;
    }
    fieldset { border: none; padding: 0; margin: 0; }
    legend {
      font-size: 1.2rem;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }
    .address-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      white-space: nowrap;
      margin-bottom: 1rem;
    }
    .checkbox-label {
      display: inline-flex;
      align-items: center;
      margin: 0;
    }
    /* Extra spacing for the child information fields */
    .child-box label { margin-bottom: 0.5rem; }
    .child-box input { margin-bottom: 0.75rem; }
    /* Extra spacing for the parent/guardian info fields */
    .parent-box label { margin-bottom: 0.5rem; }
    .parent-box input { margin-bottom: 0.75rem; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Greenwing Youth Event</h1>
    <p>Hosted by St. Mary's County Ducks Unlimited</p>
    <p><strong>Date:</strong> June 7th, 8 AM â€“ 2 PM</p>
    <p>
      <strong>Location:</strong> Sanner's Lake Sportsmen's Club<br>
      21374 Sanner's Lane, Lexington Park, MD 20653
    </p>
    <p><strong>Cost:</strong> $20 per child (includes membership and lunch)</p>
    <p>Children must be accompanied by an adult.</p>
    
    <!-- Form action updated with your web app URL -->
    <form action="https://script.google.com/macros/s/AKfycbwXHPseCtrPKJUpBveigfzeVTHmYxJ5RepxitYzy_7LZeXg7oyJHMqMoq0CIGgont9CHA/exec" method="POST">
      <!-- Parent/Guardian Info Section -->
      <fieldset class="section-box parent-box">
        <legend>Parent/Guardian Information</legend>
        <label for="parentName">Name:</label>
        <input type="text" id="parentName" name="parentName" required>

        <label for="parentAddress">Address:</label>
        <input type="text" id="parentAddress" name="parentAddress" required>

        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" required>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" required>
      </fieldset>

      <!-- Number of Children Field -->
      <div class="section-box">
        <label for="numChildren">Number of Children Being Registered:</label>
        <input type="number" id="numChildren" name="numChildren" min="1" value="1" required>
      </div>

      <!-- Container for dynamically generated Child Information Boxes -->
      <div id="childContainer"></div>

      <button type="submit">Register Now</button>
    </form>
  </div>

  <script>
    // Function to generate the HTML for a single child information box.
    function generateChildBox(i) {
      return `
      <fieldset class="section-box child-box">
        <legend>Child Information - Child ${i}</legend>
        <div class="row">
          <div class="field">
            <label for="childFirstName_${i}">First Name:</label>
            <input type="text" id="childFirstName_${i}" name="childFirstName_${i}" required>
          </div>
          <div class="field">
            <label for="childLastName_${i}">Last Name:</label>
            <input type="text" id="childLastName_${i}" name="childLastName_${i}" required>
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="dob_${i}">Date of Birth (MM/YYYY):</label>
            <input type="text" id="dob_${i}" name="dob_${i}" placeholder="MM/YYYY"
              pattern="^(0[1-9]|1[0-2])\\/\\d{4}$" 
              title="Enter a valid date in MM/YYYY format (e.g., 05/2023)" 
              maxlength="7" required>
          </div>
          <div class="field">
            <label for="age_${i}">Age:</label>
            <input type="number" id="age_${i}" name="age_${i}" min="1" required>
          </div>
        </div>
        <div class="address-container">
          <label for="childAddress_${i}">Address:</label>
          <label class="checkbox-label" for="sameAddressCheckbox_${i}">
            <input type="checkbox" id="sameAddressCheckbox_${i}" name="sameAddressCheckbox_${i}">
            Same as Parent/Guardian Address
          </label>
        </div>
        <input type="text" id="childAddress_${i}" name="childAddress_${i}" placeholder="If different than Parent/Guardian">
      </fieldset>
      `;
    }

    // Function to update the child boxes based on the number entered.
    function updateChildBoxes() {
      const container = document.getElementById('childContainer');
      const num = parseInt(document.getElementById('numChildren').value) || 0;
      container.innerHTML = ''; // Clear existing boxes.

      for (let i = 1; i <= num; i++) {
        container.innerHTML += generateChildBox(i);
        
        // Add event listener for auto-inserting "/" into the child's DOB field.
        let dobInput = document.getElementById(`dob_${i}`);
        dobInput.addEventListener('input', function() {
          let val = this.value;
          if (val.length === 2 && !val.includes('/')) {
            this.value = val + '/';
          }
        });
        
        // Add event listener for the child's "Same as Parent/Guardian Address" checkbox.
        document.getElementById(`sameAddressCheckbox_${i}`)
          .addEventListener('change', function() {
            let childAddr = document.getElementById(`childAddress_${i}`);
            if (this.checked) {
              childAddr.value = document.getElementById('parentAddress').value;
              childAddr.readOnly = true;
            } else {
              childAddr.readOnly = false;
            }
          });
      }
    }

    // When the parent's address changes, update each child's address if its checkbox is checked.
    document.getElementById('parentAddress').addEventListener('input', function () {
      const num = parseInt(document.getElementById('numChildren').value) || 0;
      for (let i = 1; i <= num; i++) {
        const checkbox = document.getElementById(`sameAddressCheckbox_${i}`);
        const childAddr = document.getElementById(`childAddress_${i}`);
        if (checkbox && checkbox.checked) {
          childAddr.value = this.value;
          childAddr.readOnly = true;
        }
      }
    });

    // Update child boxes when the number of children is changed.
    document.getElementById('numChildren').addEventListener('input', updateChildBoxes);

    // Generate the initial child box (default is 1).
    updateChildBoxes();
  </script>
</body>
</html>
